<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resultados de B√∫squeda - QuinchoFinder</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
        <a href="/" class="logo">
            <img src="/images/quincho-finder-logo.png" alt="Logo QuinchoFinder">
        </a>
        <nav class="nav">
            <a href="/">Inicio</a>
        </nav>
    </header>

    <main class="results-page-main">
      <div class="container">
        <h2 id="results-title">Cargando resultados...</h2>
        <p class="summary"></p>

        <section class="property-list"></section>
      </div>
    </main>

    <footer class="footer">
      <p>&copy; 2025 QuinchoFinder.</p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const resultsContainer = document.querySelector(".property-list");
        const summaryElement = document.querySelector(".summary");
        const titleElement = document.getElementById("results-title");

        const searchParams = JSON.parse(localStorage.getItem("searchParams"));
        const results = JSON.parse(localStorage.getItem("searchResults"));

        if (!searchParams) {
          titleElement.textContent = "Inicia una b√∫squeda";
          summaryElement.textContent =
            "Por favor, usa la p√°gina de inicio para buscar espacios.";
          return;
        }

        titleElement.textContent = `Quinchos en "${searchParams.ciudad}" para el ${searchParams.fecha}`;

        if (results && results.length > 0) {
          summaryElement.textContent = `Se encontraron ${results.length} propiedades que cumplen con tu b√∫squeda.`;

          results.forEach((quincho) => {
            const cardHTML = `
              <article class="property-card">
                <img src="/images/placeholder-img-1.jpg" alt="Imagen de ${
                  quincho.nombre
                }" class="property-image" />
                <div class="property-info">
                  <h3>${quincho.nombre}</h3>
                  <p class="location">üìç ${quincho.ciudad}</p>
                  <p class="details">Precio: $${quincho.precio_dia} / d√≠a</p>
                  <div class="price-action">
                    <span class="price">$${quincho.precio_dia}</span>
                    <a href="/detail.html?id=${
                      quincho.id
                    }" class="btn-primary">Ver detalles</a>
                  </div>
                </div>
              </article>
            `;
            resultsContainer.innerHTML += cardHTML;
          });
        } else {
          summaryElement.textContent = `No se encontraron propiedades en "${searchParams.ciudad}" para la fecha seleccionada.`;
          resultsContainer.innerHTML =
            '<p style="padding: 20px; text-align: center;">Prob√° con otra fecha o zona.</p>';
        }
      });
    </script>
  </body>
</html>
